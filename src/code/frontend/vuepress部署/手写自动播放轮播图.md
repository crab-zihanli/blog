---
title: å†™ä¸ªç®€å•å±•ç¤ºç”¨çš„è‡ªåŠ¨æ’­æ”¾è½®æ’­å›¾
icon: code
shortTitle: è‡ªåŠ¨æ’­æ”¾è½®æ’­å›¾
date: 2025-05-14
category: 
- coding
- frontend
tag:
- vue
- js
---

> é€šè¿‡`vue3.js`è¯­æ³•å†™äº†ä¸€ä¸ªéå¸¸ç®€å•çš„è‡ªåŠ¨æ’­æ”¾å†…å®¹çš„ç»„ä»¶ï¼Œæ”¯æŒæ‚¬åœååœæ­¢æ’­æ”¾ï¼Œæ›´æ¸…æ¥šçš„å±•ç¤ºæ•ˆæœã€‚

<!-- more -->

åœ¨æ­å»ºè‡ªå·±çš„åšå®¢æ—¶ï¼Œæƒ³è¦ä¸€ä¸ªè‡ªåŠ¨æ’­æ”¾å±•ç¤ºè‡ªå·±å…´è¶£çˆ±å¥½ï¼ˆè£…ä¸€ä¸‹ï¼‰çš„è½®æ’­å›¾æ•ˆæœï¼Œè™½ç„¶å¸‚é¢ä¸Šå¥½å¤šç°æˆçš„ç»„ä»¶ï¼Œä¸è¿‡å› ä¸ºæˆ‘éƒ¨ç½²åˆ°githubé™æ€é¡µé¢ï¼Œä¸€ç›´æ€•æŠŠå†…å®¹æå¤šäº†ï¼Œè€Œä¸”æˆ‘è¦çš„åŠŸèƒ½å¾ˆç®€å•ï¼ˆä¸”å¤§æ¦‚ç‡ä¸ä¼šå¤ç”¨ï¼Œéœ€è¦çš„æ—¶å€™å†æ”¹å§ï¼‰ï¼Œå› æ­¤å‡†å¤‡è‡ªå·±æ‰‹æ“ä¸€ä¸ªï¼Œå®ç°çš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![æˆ‘åšçš„è¿åŠ¨çˆ±å¥½å±•ç¤ºæ•ˆæœ](../../.vuepress/public/assets/images/hobbies.gif)

## è‡ªå®šä¹‰ç»„ä»¶ä¸ä½¿ç”¨

åœ¨`vuepress-theme-hope`å®˜ç½‘å·²ç»æä¾›äº†[ç»„ä»¶æ³¨å†Œçš„æ–¹æ³•](https://theme-hope.vuejs.press/zh/guide/component/sfc.html#doc-changelog)ï¼Œè¿™é‡Œä¸å†é‡å¤èµ˜è¿°ï¼Œæˆ‘é‡‡ç”¨çš„æ–¹æ³•æ˜¯åœ¨`.vuepress/components/HobbyCarousel.vue`åˆ›å»ºäº†è¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œç„¶åå»`config.ts`è¿›è¡Œäº†**åˆ«å**çš„é…ç½®ï¼Œå› ä¸ºæˆ‘å®åœ¨æä¸æ‡‚è·¯å¾„ï¼ˆBushiï¼‰ï¼Œåæ­£è¿™æ ·åšäº†ä¹‹åéå¸¸ç¨³å¦¥ï¼

```ts
// src/.vuepress/config.ts
import { getDirname, path } from "vuepress/utils";
const __dirname = getDirname(import.meta.url);
export default defineUserConfig({
  alias: {
    "@HobbyCarousel": path.resolve(__dirname, "components/HobbyCarousel.vue"),
  },
})
```
åœ¨é¡µé¢ä¸­å³`md`æ–‡ä»¶çš„ä½¿ç”¨ç›¸å¯¹æ¥è¯´ä¸éš¾ï¼Œæˆ‘é‡‡ç”¨äº†**å±€éƒ¨æ³¨å†Œ**çš„æ–¹å¼ï¼Œå¦‚æœæƒ³è¦åœ¨å¤šä¸ªé¡µé¢éƒ½ç”¨ï¼Œä¹Ÿå¯ä»¥å…¨å±€æ³¨å†Œã€‚è¿™é‡Œçš„æ ¸å¿ƒæ€æƒ³æ˜¯`vuepress`ä¼šå°†ä½ å†™çš„è¿™äº›`md`ç¼–è¯‘ä¸º`HTML`ï¼Œç„¶åå†è½¬ä¸º`Vue SFC`ï¼Œå› æ­¤è¿™é‡Œç›´æ¥è·Ÿå†™`Vue`ä¸€æ ·ç”¨å°±å¯ä»¥ï¼Œæ¯”å¦‚æˆ‘çš„ï¼š
```md
## å•¥éƒ½çˆ±æ¢ç´¢ç‚¹çš„è¿åŠ¨çˆ±å¥½
<HobbyCarousel/>
<!-- æˆ‘è¿™é‡Œç›´æ¥é»˜è®¤äº†ï¼Œå…¶å®åé¢è®¾ç½®äº†å‚æ•°ï¼Œå¯ä»¥è‡ªå®šä¹‰çš„ -->

<script setup>
  import HobbyCarousel from "@HobbyCarousel";//ä¸€ä¸ªæ–‡ä»¶å°±å†™ä¸€ä¸ªscriptå“¦ï¼
</script>
```

## è½®æ’­å›¾ç»„ä»¶çš„å®ç°

### 1. `HTML`ç»“æ„æ­å»º
- scroll-wrapperå±‚ï¼šæœ€å¤–éƒ¨ç›’å­ï¼Œç›¸å½“äºå®¹å™¨
  - fadeï¼šåˆ†å·¦å³ï¼Œä¸ºé®ç½©
  - scroll-contentå±‚ï¼šæ”¾ç½®æ»šåŠ¨å…ƒç´ çš„å±‚
    - icon-itemï¼šæ»šåŠ¨å…ƒç´ ï¼šé€šè¿‡v-forå®ç°
      - icon
      - label

```html :collapsed-lines=10
<template>
  <!-- isPausedæ§åˆ¶é¼ æ ‡æ‚¬åœæ—¶åœæ­¢çš„æ•ˆæœ -->
  <div
    class="scroll-wrapper"
    @mouseenter="isPaused = true"
    @mouseleave="isPaused = false"
  >
    <!-- æ¸éšé®ç½© -->
    <div class="fade-left"></div>
    <div class="fade-right"></div>

    <!-- æ»šåŠ¨å†…å®¹ -->
    <div
      ref="scrollContainer"
      class="scroll-content"
      :style="scrollStyle"
    >
      <!-- è¿™é‡Œçš„items.concatæ˜¯æ‹¼æ¥ï¼Œä¸ºäº†æ— ç¼æ»šåŠ¨ -->
      <div
        v-for="(item, index) in items.concat(items).concat(items)"
        :key="index"
        class="icon-item"
      >
        <div class="icon">{{ item.icon }}</div>
        <div class="label">{{ item.name }}</div>
      </div>
    </div>
  </div>
</template>
```

### 2. æ•ˆæœå¥½çš„`requestAnimationFrame()`åŠ¨ç”»æ–¹æ³•

è¦å®ç°è¿™ä¸ªæ•ˆæœï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©cssçš„`animation`ï¼Œæˆ–è€…æ˜¯jsçš„`setInterval`ï¼Œè¿™é‡Œå­¦ä¹ ä¸€ä¸‹æ–°æŠ€æœ¯ç”¨äº†`requestAnimationFrame()`ã€‚çœ‹MDNå®˜ç½‘å…¶å®æ²¡å’‹çœ‹æ‡‚ï¼Œè¿™ç¯‡åšå®¢å†™å¾—å¾ˆæ¸…æ¥šï¼š[requestAnimationFrameçš„ç”¨æ³•ã€ä¼˜åŠ¿å’Œåº”ç”¨åœºæ™¯](https://juejin.cn/post/7431004279819288613)ï¼Œæ¨èé˜…è¯»ï¼ˆè¿™é‡Œæˆ‘å°±ä¸é‡å¤é€ è½®å­äº†ã€‘ï¼

æ ¸å¿ƒæˆ‘è§‰å¾—æœ‰ä¸‰ç‚¹ï¼š
1. é€’å½’ä½¿ç”¨ï¼šè¦åœ¨è®¾ç½®çš„åŠ¨ç”»å›è°ƒå‡½æ•°é‡Œç»“æŸéƒ¨åˆ†å†è°ƒç”¨ä¸€ä¸‹ï¼›
2. å¸è½½å‰è§£é™¤è°ƒç”¨ï¼šå–æ¶ˆè¿™ä¸ªå®šæ—¶å™¨ï¼ˆåˆ©ç”¨è¿”å›çš„IDï¼‰ï¼›
3. å›è°ƒå‡½æ•°ä¼ å…¥çš„å‚æ•°ï¼šä¸Šä¸€å¸§ç»“æŸæ¸²æŸ“çš„æ—¶é—´ï¼›

```js :collapsed-lines=10
const props = defineProps({
  items: {
    type: Array,
    default: () => [
      { icon: "ğŸ€", name: "ç¯®çƒ" },
      { icon: "ğŸ“", name: "ä¹’ä¹“çƒ" },
      { icon: "ğŸ¾", name: "å£çƒ" },
      { icon: "ğŸ¸", name: "ç¾½æ¯›çƒ" },
      { icon: "ğŸš´", name: "éª‘è¡Œ" },
      { icon: "ğŸƒ", name: "è·‘æ­¥" },
      { icon: "ğŸŠ", name: "æ¸¸æ³³" },
    ],
  },
  speed: {
    type: Number,
    default: 0.08, // px/ms
  },
});//æ¥æ”¶çš„å‚æ•°ï¼Œè¿™é‡Œè®¾ç½®é»˜è®¤å€¼

const scrollContainer = ref(null);
const offset = ref(0);
const isPaused = ref(false);
let lastTime = null;
let animationFrameId;//è¿™é‡Œæ˜¯ç”¨æ¥å­˜å‚¨requestAnimationFrameçš„id

const scrollStyle = computed(() => ({
  transform: `translateX(-${offset.value}px)`,
  transition: 'transform 0s linear',
}));

const animate = (time) => {
  if (!lastTime) lastTime = time;
  const delta = time - lastTime;
  lastTime = time;

  if (!isPaused.value) {
    offset.value += delta * props.speed;
    const el = scrollContainer.value;
    if (el) {
      const contentWidth = el.scrollWidth / 3;
      if (offset.value >= contentWidth) {
        offset.value -= contentWidth;
      }
    }
  }

  animationFrameId = requestAnimationFrame(animate);
};

onMounted(() => {
  animationFrameId = requestAnimationFrame(animate);
});

onBeforeUnmount(() => {
  cancelAnimationFrame(animationFrameId);
});
</script>

```


### 3. é¡µé¢ç¾åŒ–ï¼ˆä¸¤ä¾§çš„é®ç½©ï¼‰

```css :collapsed-lines=10
/* æ¸éšé®ç½© */
.fade-left,
.fade-right {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 40px;
  pointer-events: none;
  z-index: 1;
}

.fade-left {
  left: 0;
  background: linear-gradient(to right, white, rgba(255, 255, 255, 0));
}

.fade-right {
  right: 0;
  background: linear-gradient(to left, white, rgba(255, 255, 255, 0));
}
```

## åç»­æ”¹è¿›

å¤ªç²—ç³™äº†......ä¸è¿‡æ–¹ä¾¿ç›´æ¥åœ¨mdæ–‡ä»¶ä¿®æ”¹ï¼Œä»¥åŠå¯ä»¥æ ¹æ®`offset`å˜é‡åç»­åšç‚¹å‡»åˆ‡æ¢çš„æ•ˆæœã€‚